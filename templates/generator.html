<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Config Generator</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">
    <a class="navbar-brand" href="{{ url_for('dashboard') }}">Configs Dashboard</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'dashboard' %}active{% endif %}" href="{{ url_for('dashboard') }}">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'generator' %}active{% endif %}" href="{{ url_for('generator') }}">Config Generator</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'image_pages' %}active{% endif %}" href="{{ url_for('image_pages') }}">Image Pages</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-warning" href="{{ url_for('logout') }}">Logout</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mt-5">
  <h2>Config Generator</h2>

  <form method="POST" enctype="multipart/form-data">
    <!-- Mandatory Domain URL -->
    <div class="mb-3">
      <label class="form-label">Domain URL (for domain key) *</label>
      <input type="text" name="domain_url" class="form-control" value="{{ domain_url or '' }}" required>
    </div>

    <!-- Optional URLs -->
    <h5>1️⃣ URL Input (optional if uploading HTML files)</h5>
    <div class="mb-3">
      <label class="form-label">List Page URL</label>
      <input type="text" name="field1" class="form-control" value="{{ field1 or '' }}">
    </div>
    <div class="mb-3">
      <label class="form-label">Detail Page URL</label>
      <input type="text" name="field2" class="form-control" value="{{ field2 or '' }}">
    </div>

    <hr>
    <h5>2️⃣ HTML File Upload (optional, for large pages)</h5>
    <div class="mb-3">
      <label class="form-label">List Page HTML File</label>
      <input type="file" name="field1_file" class="form-control" accept=".html,.txt">
    </div>
    <div class="mb-3">
      <label class="form-label">Detail Page HTML File</label>
      <input type="file" name="field2_file" class="form-control" accept=".html,.txt">
    </div>

    <button type="submit" name="action" value="generate" class="btn btn-primary mt-2">
      Generate JSON
    </button>
  </form>

  {% if generated_json %}
  <hr>
  <div class="mb-3">
    <label class="form-label">Generated JSON</label>
    <textarea class="form-control" rows="15" readonly>{{ generated_json }}</textarea>
  </div>

  <form method="POST">
    <input type="hidden" name="json_data" value="{{ generated_json }}">
    <input type="hidden" name="domain_url" value="{{ domain_url }}">
    <button type="submit" name="action" value="store" class="btn btn-success">Store in DB</button>
    <button type="submit" name="action" value="reject" class="btn btn-danger">Reject</button>
  </form>
  {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
